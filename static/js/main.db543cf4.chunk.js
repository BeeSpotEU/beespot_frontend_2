(this.webpackJsonpbeespot=this.webpackJsonpbeespot||[]).push([[0],{172:function(e,t,n){e.exports=n.p+"static/media/bee-logo.9a5c4dbf.svg"},173:function(e,t,n){e.exports=n.p+"static/media/bee-logo.9a5c4dbf.svg"},177:function(e,t,n){e.exports=n(370)},182:function(e,t,n){},184:function(e,t,n){},339:function(e,t,n){},340:function(e,t,n){},360:function(e,t,n){},368:function(e,t,n){},370:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),r=n(8),c=n.n(r),l=(n(182),n(137),n(76)),i=n(176),s=n(44),u=(n(184),n(46)),m=n(163),p=n(71),d=a.createContext(),f={channel:null,selfCreatedLocations:new Map,locations:new Map,socket:null,session:null,presence:[]},h=function(e,t){return Object(m.a)(e,(function(e){switch(t.type){case"setPresence":console.log(t.presence),e.presence=t.presence;break;case"setSocket":e.socket=t.socket;break;case"setChannel":e.channel=t.channel;break;case"newLocation":e.locations=new Map(e.locations.set(t.location.id,t.location));break;case"createdLocation":e.selfCreatedLocations=new Map(e.selfCreatedLocations.set(t.location.id,t.location));break;case"currentSession":e.session=t.session}}))},g=(d.Consumer,n(47),n(19)),b=(n(92),n(14)),v=(n(131),n(64)),E=(n(80),n(25)),y=E.a.Group,j=(v.a.Option,b.a.create()((function(e){var t=e.form.getFieldDecorator,n=e.loading;return o.a.createElement(b.a,{onSubmit:function(t){t.preventDefault(),e.form.validateFields((function(e,t){}))},className:"audience-form"},o.a.createElement(b.a.Item,{label:"Naam",colon:!1},t("Naam",{rules:[{required:!0,message:"Vul hier je naam in :)"}]})(o.a.createElement(E.a,{placeholder:"Naam"}))),o.a.createElement(y,{compact:!0},o.a.createElement(b.a.Item,{label:"Postcode",colon:!1},t("Postcode",{rules:[{required:!1,message:"Een postcode is optioneel."}]})(o.a.createElement(E.a,{placeholder:"Postcode"}))),o.a.createElement(b.a.Item,{label:"Huisnummer",colon:!1},t("Huisnummer",{rules:[{required:!1,message:"Een huisnummer is optioneel."}]})(o.a.createElement(E.a,{placeholder:"Huisnummer"})))),o.a.createElement(b.a.Item,null,o.a.createElement(g.a,{loading:n,type:"primary",htmlType:"submit",className:"login-form-button"},"submit")))}))),k=(n(371),n(136)),O=(E.a.Group,v.a.Option,b.a.create()((function(e){var t=e.form.getFieldDecorator,n=e.loading;return o.a.createElement(b.a,{onSubmit:function(t){t.preventDefault(),e.form.validateFields((function(e,t){}))},className:"source-expectation-form"},o.a.createElement(b.a.Item,{label:"Naam",colon:!1},"// Get name from server",t("Naam",{rules:[{required:!0,message:"Vul hier je naam in :)"}]})(o.a.createElement(E.a,{placeholder:"Naam"}))),o.a.createElement(b.a.Item,{label:"Dracht hoeveelheid",colon:!1},t("Dracht",{rules:[{required:!0,message:"Vul hier een schatting van de dracht in."}]})(o.a.createElement(k.a,{min:1,max:10,defaultValue:5}))),o.a.createElement(b.a.Item,{label:"Diversiteit",colon:!1},t("Diversiteit",{rules:[{required:!0,message:"Vul hier een schatting van de diversiteit gedurende het jaar in."}]})(o.a.createElement(k.a,{min:1,max:10,defaultValue:5}))),o.a.createElement(b.a.Item,null,o.a.createElement(g.a,{loading:n,type:"primary",htmlType:"submit",className:"login-form-button"},"submit")))}))),w=(n(158),n(75)),N=(E.a.Group,v.a.Option,b.a.create()((function(e){var t=e.form.getFieldDecorator,n=e.loading;return o.a.createElement(b.a,{onSubmit:function(t){t.preventDefault(),e.form.validateFields((function(e,t){}))},className:"source-expectation-form"},o.a.createElement(b.a.Item,{label:"Naam",colon:!1},"// Get name from server",t("Naam",{rules:[{required:!0,message:"Vul hier je naam in :)"}]})(o.a.createElement(E.a,{placeholder:"Naam"}))),o.a.createElement(b.a.Item,{label:"Opbrengst honing in kilo's honing afgelopen jaar",colon:!1},t("Honing",{rules:[{required:!0,message:"Vul hier het aantal kilo's honing van afgelopen jaar in."}]})(o.a.createElement(w.a,{min:0,max:500}))),o.a.createElement(b.a.Item,{label:"Aantal kilo suiker gevoerd in het afgelopen jaar",colon:!1},t("Suiker",{rules:[{required:!0,message:"Vul hier het aantal kilo's suiker van afgelopen jaar in."}]})(o.a.createElement(w.a,{min:0,max:99}))),o.a.createElement(b.a.Item,null,o.a.createElement(g.a,{loading:n,type:"primary",htmlType:"submit",className:"login-form-button"},"submit")))}))),x=function(e,t,n){var a=e.channel(t,{});a.join().receive("ok",(function(){return n({type:"setChannel",channel:a})})).receive("error",(function(){return console.error("Connection error")}));var o=new p.Presence(a);return o.onSync((function(){n({type:"setPresence",presence:o.list()})})),a},S=function(e,t,n){var a=x(e,"locations:".concat(t),n);return n({type:"currentSession",session:t}),a.on("new_location",(function(e){n({type:"newLocation",location:e.body})})),a},C=function(e,t){e.leave(),t({type:"currentSession",session:null}),t({type:"setChannel",channel:null})},L=function(e){var t=e.history,n=Object(a.useContext)(d),r=n.state,c=n.dispatch;return Object(a.useEffect)((function(){r.socket&&(r.channel&&C(r.channel,c),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){},a=x(e,"locations:lobby",t);a.on("created_session",(function(e){n(e.body)}))}(r.socket,c,(function(e){t.push("/presentation/".concat(e))})))}),[r.socket]),o.a.createElement("div",null,o.a.createElement(g.a,{onClick:function(){r.channel.push("create_session",{})}},"Cre\xeber sessie"),r.session&&o.a.createElement("p",null,"Sessie: ",r.session))},P=g.a.Group,D=b.a.create()((function(e){var t=e.form.getFieldDecorator,n=e.handleAddLocation,a=e.loading;return o.a.createElement(b.a,{onSubmit:function(t){t.preventDefault(),e.form.validateFields((function(e,t){e||n(t)}))},className:"location-form"},o.a.createElement(b.a.Item,{label:"Bijenstandnaam",colon:!1},t("name",{rules:[{required:!0,message:"Vul hier de naam van de bijenstand in."}]})(o.a.createElement(E.a,{placeholder:"Bijenstandnaam"}))),o.a.createElement(b.a.Item,{label:"Aantal volken in afgelopen jaar",colon:!1},t("hives",{rules:[{required:!0,message:"Vul hier het aantal volken van afgelopen jaar in."}]})(o.a.createElement(w.a,{min:0,max:99}))),o.a.createElement(b.a.Item,{label:"Lengtegraad",colon:!1},t("longitude",{rules:[{required:!0,message:"Vul een lengtegraad in!"}]})(o.a.createElement(E.a,{placeholder:"Lengtegraad"}))),o.a.createElement(b.a.Item,{label:"Breedtegraad",colon:!1},t("latitude",{rules:[{required:!0,message:"Vul een breedtegraad in!"}]})(o.a.createElement(E.a,{placeholder:"Breedtegraad"}))),o.a.createElement(P,null,o.a.createElement(g.a,{loading:a,type:"danger",htmlType:"submit",className:"login-form-button"},"Ik heb geen bijenstand"),o.a.createElement(g.a,{loading:a,type:"default",htmlType:"submit",className:"login-form-button"},"Nog een stand..."),o.a.createElement(g.a,{loading:a,type:"primary",htmlType:"submit",className:"login-form-button"},"Klaar")))})),I=n(170),V=n(65),_=(n(89),n(339),n(97)),q=n(98),A=n(101),F=n(99),T=n(102),B=n(172),W=n.n(B),G={pointerEvents:"none"},H=function(e){function t(){return Object(_.a)(this,t),Object(A.a)(this,Object(F.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(q.a)(t,[{key:"render",value:function(){return o.a.createElement("img",{src:W.a,style:G})}}]),t}(a.PureComponent);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(n,!0).forEach((function(t){Object(I.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z=function(e){var t=e.match.params.session,n=Object(a.useContext)(d),r=n.state,c=n.dispatch,l=Object(a.useState)({latitude:52.119,longitude:5.111,zoom:8}),i=Object(u.a)(l,2),s=i[0],m=i[1],p=Object(a.useState)(),f=Object(u.a)(p,2),h=f[0],b=f[1],v=Object(a.useState)(!1),E=Object(u.a)(v,2);E[0],E[1];Object(a.useEffect)((function(){r.socket&&t&&r.currentSession!==t&&(r.channel&&C(r.channel,c),function(e,t,n){var a=x(e,"locations:".concat(t),n);n({type:"currentSession",session:t}),a.on("created_location",(function(e){n({type:"createdLocation",location:e.body})}))}(r.socket,t,c))}),[r.socket,t]);var y=function(e){return function(t){c({type:"createdLocation",location:R({},e,{longitude:"".concat(t.lngLat[0]),latitude:"".concat(t.lngLat[1])})}),r.channel&&r.channel.push("add_location",{body:R({},e,{longitude:"".concat(t.lngLat[0]),latitude:"".concat(t.lngLat[1])})})}};return o.a.createElement("div",{className:"pick-locations mapbox-wrapper"},o.a.createElement(V.b,Object.assign({ref:function(e){return b(e)},mapStyle:"//mvt.opengeo.nl/basemap-style.json"},s,{width:"100%",height:"100%",onViewportChange:function(e){return m(e)}}),Array.from(r.selfCreatedLocations.values()).map((function(e){var t=parseFloat(e.longitude),n=parseFloat(e.latitude);return o.a.createElement(V.a,{key:e.id,longitude:t,latitude:n,offsetTop:-39,offsetLeft:-23,draggable:!0,onDragEnd:y(e)},o.a.createElement(H,null))}))),o.a.createElement(g.a,{type:"primary",shape:"circle",icon:"plus",size:"large",onClick:function(){var e=h.getMap().getCenter();r.channel&&r.channel.push("add_location",{body:{latitude:"".concat(e.lat),longitude:"".concat(e.lng)}})},className:"add_location"}))},U=(n(340),n(173)),J=n.n(U),K={pointerEvents:"none"},$=function(e){function t(){return Object(_.a)(this,t),Object(A.a)(this,Object(F.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(q.a)(t,[{key:"render",value:function(){return o.a.createElement("img",{src:J.a,style:K})}}]),t}(a.PureComponent),Q=n(174),X=n.n(Q),Y=function(e){var t=e.match.params.session,n=Object(a.useContext)(d),r=n.state,c=n.dispatch,l=Object(a.useState)({latitude:52.119,longitude:5.111,zoom:8}),i=Object(u.a)(l,2),s=i[0],m=i[1];Object(a.useEffect)((function(){r.socket&&t&&r.currentSession!==t&&(r.channel&&C(r.channel,c),S(r.socket,t,c))}),[r.socket,t]);var p=Object(a.useState)(),f=Object(u.a)(p,2),h=(f[0],f[1]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(X.a,{style:{overflow:"auto",height:"100%",position:"fixed",right:0},theme:"light",width:400}),o.a.createElement("div",{className:"show-locations mapbox-wrapper"},o.a.createElement(V.b,Object.assign({ref:function(e){return h(e)},mapStyle:"//mvt.opengeo.nl/basemap-style.json"},s,{width:"100%",height:"100%",onViewportChange:function(e){return m(e)}}),Array.from(r.locations.values()).map((function(e){var t=parseFloat(e.longitude),n=parseFloat(e.latitude);return o.a.createElement(V.a,{key:e.id,longitude:t,latitude:n,offsetTop:-39,offsetLeft:-23},o.a.createElement($,null))})))))},Z=function(e){var t=e.match.params.session,n=e.history,r=Object(a.useContext)(d),c=r.state,l=r.dispatch;return Object(a.useEffect)((function(){c.socket&&t&&c.currentSession!==t&&(c.channel&&C(c.channel,l),S(c.socket,t,l))}),[c.socket,t]),o.a.createElement("div",null,o.a.createElement("p",null,t),o.a.createElement(g.a,{onClick:function(){n.push("/presentation/".concat(t,"/locations"))}},"Bekijk locaties"))},ee=n(175),te=n.n(ee),ne=(n(360),function(e){var t=e.history;return o.a.createElement("div",{className:"center"},o.a.createElement("h1",null,"Welcome!"),o.a.createElement("h2",null,"Enter the session code"),o.a.createElement(te.a,{className:"search-session",placeholder:"Vul de sessie code in",enterButton:"Deelnemen",onSearch:function(e){t.push("/".concat(e))}}))}),ae=(n(368),l.a.Header),oe=function(){var e,t=Object(a.useContext)(d).state,n=(e=t.presence,Array.isArray(e)?e.reduce((function(e,t){return e+t.metas.length}),0):0);return o.a.createElement(ae,{className:"header"},o.a.createElement("div",{className:"logo"}),o.a.createElement("span",{className:"live"},"Live: ",n," participants"))},re=l.a.Content;var ce=function(){var e=Object(a.useContext)(d),t=e.state,n=e.dispatch;return Object(a.useEffect)((function(){if(!t.socket){var e=new p.Socket("wss://wss.beespot.eu/socket",{params:{user_id:"123"}});e.connect(),e.onClose((function(e){return n({type:"setSocket",socket:null})})),n({type:"setSocket",socket:e})}}),[]),o.a.createElement("div",{className:"App"},o.a.createElement(l.a,{className:"layout"},o.a.createElement(oe,null),o.a.createElement(re,{style:{marginTop:24,height:"calc(100vh - 64px)"}},o.a.createElement(i.a,{basename:"/beespot_frontend_2"},o.a.createElement(s.c,null,o.a.createElement(s.a,{path:"/",exact:!0,component:ne}),o.a.createElement(s.a,{path:"/presentation",exact:!0,component:L}),o.a.createElement(s.a,{path:"/:session",exact:!0,component:z}),o.a.createElement(s.a,{path:"/presentation/:session",exact:!0,component:Z}),o.a.createElement(s.a,{path:"/presentation/:session/locations",exact:!0,component:Y}),o.a.createElement(s.a,{path:"/audience",exact:!0,component:j}),o.a.createElement(s.a,{path:"/foodsources",exact:!0,component:O}),o.a.createElement(s.a,{path:"/location",exact:!0,component:D}),o.a.createElement(s.a,{path:"/production",exact:!0,component:N}))))))},le=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ie(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(o.a.createElement((function(e){var t=e.children,n=a.useReducer(h,f),o=Object(u.a)(n,2),r={state:o[0],dispatch:o[1]};return a.createElement(d.Provider,{value:r},t)}),null,o.a.createElement(ce,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/beespot_frontend_2",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/beespot_frontend_2","/service-worker.js");le?(!function(e,t){fetch(e).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ie(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ie(t,e)}))}}()}},[[177,1,2]]]);
//# sourceMappingURL=main.db543cf4.chunk.js.map